<!DOCTYPE html>
<html lang="hu">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AmÅ‘ba Online</title>
  <link rel="stylesheet" href="themes.css">
  <link rel="stylesheet" href="style.css?v=3.3">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
  <div class="container">
    <header>
      <h1>ğŸ® AmÅ‘ba Online</h1>
      <p class="subtitle">5-Ã¶t egy sorba - Gomoku</p>
    </header>

    <!-- Admin Login Modal -->
    <div id="adminModal" class="modal" style="display: none;">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Admin BejelentkezÃ©s</h2>
        <input type="password" id="adminCodeInput" placeholder="Admin kÃ³d" maxlength="50">
        <button id="adminSubmitBtn" class="btn btn-primary">BejelentkezÃ©s</button>
      </div>
    </div>

    <!-- Theme Settings Modal -->
    <div id="themeModal" class="modal" style="display: none;">
      <div class="modal-content theme-modal-content">
        <span class="close theme-close">&times;</span>
        <h2>ğŸ¨ TÃ©ma BeÃ¡llÃ­tÃ¡sok</h2>

        <div class="theme-section">
          <h3>ğŸ“ TÃ¡bla TÃ©ma</h3>
          <div class="theme-options">
            <button class="theme-option" data-board-theme="wood">
              <div class="theme-preview wood-preview"></div>
              <span>ğŸªµ Fa</span>
            </button>
            <button class="theme-option" data-board-theme="marble">
              <div class="theme-preview marble-preview"></div>
              <span>ğŸ›ï¸ MÃ¡rvÃ¡ny</span>
            </button>
            <button class="theme-option" data-board-theme="neon">
              <div class="theme-preview neon-preview"></div>
              <span>ğŸ’ Neon</span>
            </button>
            <button class="theme-option" data-board-theme="forest">
              <div class="theme-preview forest-preview"></div>
              <span>ğŸŒ² ErdÅ‘</span>
            </button>
            <button class="theme-option" data-board-theme="ocean">
              <div class="theme-preview ocean-preview"></div>
              <span>ğŸŒŠ Ã“ceÃ¡n</span>
            </button>
          </div>
        </div>

        <div class="theme-section">
          <h3>ğŸ¯ BÃ¡bu SzÃ­nek</h3>
          <div class="theme-options">
            <button class="theme-option" data-piece-color="classic">
              <div class="piece-color-preview">
                <span class="preview-piece classic-p1"></span>
                <span class="preview-piece classic-p2"></span>
              </div>
              <span>Klasszikus</span>
            </button>
            <button class="theme-option" data-piece-color="neon">
              <div class="piece-color-preview">
                <span class="preview-piece neon-p1"></span>
                <span class="preview-piece neon-p2"></span>
              </div>
              <span>ğŸ’« Neon</span>
            </button>
            <button class="theme-option" data-piece-color="pastel">
              <div class="piece-color-preview">
                <span class="preview-piece pastel-p1"></span>
                <span class="preview-piece pastel-p2"></span>
              </div>
              <span>ğŸŒ¸ Pasztel</span>
            </button>
            <button class="theme-option" data-piece-color="vibrant">
              <div class="piece-color-preview">
                <span class="preview-piece vibrant-p1"></span>
                <span class="preview-piece vibrant-p2"></span>
              </div>
              <span>ğŸ”¥ Ã‰lÃ©nk</span>
            </button>
            <button class="theme-option" data-piece-color="nature">
              <div class="piece-color-preview">
                <span class="preview-piece nature-p1"></span>
                <span class="preview-piece nature-p2"></span>
              </div>
              <span>ğŸƒ TermÃ©szet</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Victory Modal -->
    <div id="victoryModal" class="victory-modal" style="display: none;">
      <div class="victory-modal-content">
        <div class="confetti-container" id="confettiContainer"></div>
        <div class="trophy-icon">ğŸ†</div>
        <h1 class="victory-title">GratulÃ¡lok!</h1>
        <p class="victory-winner" id="victoryWinnerName"></p>
        <p class="victory-message">GyÅ‘zÃ¶tt a jÃ¡tÃ©kban!</p>
        <div class="victory-buttons">
          <button id="victoryNewGameBtn" class="btn btn-primary victory-btn">ğŸ”„ Ãšj jÃ¡tÃ©k</button>
          <button id="victoryLeaveBtn" class="btn btn-danger victory-btn">ğŸšª KilÃ©pÃ©s</button>
        </div>
      </div>
    </div>

    <!-- Defeat Modal -->
    <div id="defeatModal" class="defeat-modal" style="display: none;">
      <div class="defeat-modal-content">
        <div class="defeat-icon">ğŸ˜¢</div>
        <h1 class="defeat-title">VesztettÃ©l!</h1>
        <p class="defeat-winner" id="defeatWinnerName"></p>
        <p class="defeat-message">GyÅ‘zÃ¶tt ebben a jÃ¡tÃ©kban.</p>
        <p class="defeat-encouragement">Ne add fel! PrÃ³bÃ¡ld Ãºjra! ğŸ’ª</p>
        <div class="defeat-buttons">
          <button id="defeatNewGameBtn" class="btn btn-primary defeat-btn">ğŸ”„ Ãšj jÃ¡tÃ©k</button>
          <button id="defeatLeaveBtn" class="btn btn-danger defeat-btn">ğŸšª KilÃ©pÃ©s</button>
        </div>
      </div>
    </div>

    <!-- Message Modal (for alerts/info) -->
    <div id="messageModal" class="message-modal" style="display: none;">
      <div class="message-modal-content">
        <span class="message-modal-close">&times;</span>
        <div id="messageModalIcon" class="message-modal-icon">â„¹ï¸</div>
        <h2 id="messageModalTitle" class="message-modal-title">Ãœzenet</h2>
        <p id="messageModalText" class="message-modal-text"></p>
        <button id="messageModalBtn" class="btn btn-primary">OK</button>
      </div>
    </div>

    <!-- New Game Request Modal -->
    <div id="newGameRequestModal" class="modal" style="display: none;">
      <div class="modal-content">
        <h2>ğŸ® Ãšj jÃ¡tÃ©k kÃ©rÃ©s</h2>
        <p id="newGameRequestMessage">Az ellenfeled Ãºj jÃ¡tÃ©kot szeretne kezdeni.</p>
        <div class="modal-buttons">
          <button id="acceptNewGameBtn" class="btn btn-primary">âœ… Elfogadom</button>
          <button id="declineNewGameBtn" class="btn btn-danger">âŒ ElutasÃ­tom</button>
        </div>
      </div>
    </div>

    <!-- Undo Request Modal -->
    <div id="undoRequestModal" class="modal" style="display: none;">
      <div class="modal-content">
        <h2>â†¶ LÃ©pÃ©s visszavonÃ¡sa</h2>
        <p id="undoRequestMessage">Az ellenfeled vissza szeretnÃ© vonni az utolsÃ³ lÃ©pÃ©st.</p>
        <div class="modal-buttons">
          <button id="acceptUndoBtn" class="btn btn-primary">âœ… Elfogadom</button>
          <button id="declineUndoBtn" class="btn btn-danger">âŒ ElutasÃ­tom</button>
        </div>
      </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="admin-panel" style="display: none;">
      <div class="admin-header">
        <h2>ğŸ›¡ï¸ Admin Panel</h2>
        <button id="adminLogoutBtn" class="btn btn-danger btn-sm">KilÃ©pÃ©s</button>
      </div>
      <div class="admin-content">
        <div class="admin-section">
          <h3>â±ï¸ IdÅ‘zÃ­tÅ‘ beÃ¡llÃ­tÃ¡sok</h3>
          <div class="timer-settings">
            <div class="toggle-setting">
              <span class="toggle-label">IdÅ‘zÃ­tÅ‘:</span>
              <label class="toggle-switch">
                <input type="checkbox" id="timerEnabled">
                <span class="toggle-slider"></span>
              </label>
              <span id="timerStatusText" class="toggle-status">Ki</span>
            </div>
            <div class="form-group" style="margin-top: 20px;">
              <label for="timerDuration">IdÅ‘ lÃ©pÃ©senkÃ©nt:</label>
              <select id="timerDuration" class="timer-duration-select">
                <option value="15">15 mÃ¡sodperc</option>
                <option value="30">30 mÃ¡sodperc</option>
                <option value="60" selected>60 mÃ¡sodperc</option>
                <option value="90">90 mÃ¡sodperc</option>
                <option value="120">2 perc</option>
              </select>
            </div>
          </div>
        </div>
        <div class="admin-section">
          <h3>VisszavonÃ¡s BeÃ¡llÃ­tÃ¡sok</h3>
          <div class="timer-settings">
            <div class="toggle-setting">
              <span class="toggle-label">VisszavonÃ¡s engedÃ©lyezÃ©se:</span>
              <label class="toggle-switch">
                <input type="checkbox" id="adminUndoToggle" checked>
                <span class="toggle-slider"></span>
              </label>
              <span id="undoStatusText" class="toggle-status">Be</span>
            </div>
          </div>
        </div>
        <div class="admin-section">
          <h3>ğŸ¤– AI BeÃ¡llÃ­tÃ¡sok</h3>
          <div class="timer-settings">
            <div class="toggle-setting">
              <span class="toggle-label">AI vs AI mÃ³d:</span>
              <label class="toggle-switch">
                <input type="checkbox" id="aiVsAiEnabled">
                <span class="toggle-slider"></span>
              </label>
              <span id="aiStatusText" class="toggle-status">Ki</span>
            </div>
          </div>
        </div>
        <div class="admin-section">
          <h3>ğŸ“Š StatisztikÃ¡k</h3>
          <button id="clearStatsBtn" class="btn btn-danger" style="margin-top: 10px;">ğŸ—‘ï¸ StatisztikÃ¡k tÃ¶rlÃ©se</button>
          <button id="clearChatBtn" class="btn btn-warning" style="margin-top: 10px; margin-left: 10px;">ğŸ’¬ Chat
            tÃ¶rlÃ©se</button>
        </div>
        <div class="admin-section admin-section-full">
          <h3>ğŸ‘¥ FelhasznÃ¡lÃ³kezelÃ©s</h3>

          <!-- Bulk Actions Bar -->
          <div id="bulkActionsBar" class="bulk-actions-bar" style="display: none;">
            <span id="selectedCount" class="selected-count">0 kivÃ¡lasztva</span>
            <div style="display: flex; gap: 8px; margin-left: auto;">
              <button id="selectAllUsersBtn" class="btn btn-secondary btn-sm">â˜‘ï¸ Ã–sszes kijelÃ¶lÃ©se</button>
              <button id="bulkBanBtn" class="btn btn-warning btn-sm">ğŸš« Bulk Ban</button>
              <button id="bulkDeleteBtn" class="btn btn-danger btn-sm">ğŸ—‘ï¸ Bulk TÃ¶rlÃ©s</button>
              <button id="deselectAllBtn" class="btn btn-secondary btn-sm">âœ– KijelÃ¶lÃ©s megszÃ¼ntetÃ©se</button>
            </div>
          </div>

          <!-- User Cards Grid -->
          <div id="userCardsContainer" class="user-cards-grid">
            <!-- User cards will be inserted here -->
          </div>
        </div>

      </div>
    </div>

    <!-- User Details Modal -->
    <div id="userDetailsModal" class="modal" style="display: none;">
      <div class="modal-content modal-large">
        <span class="modal-close" onclick="closeUserDetailsModal()">&times;</span>
        <h2>ğŸ‘¤ FelhasznÃ¡lÃ³ RÃ©szletek</h2>
        <div id="userDetailsContent">
          <!-- Details will be inserted here -->
        </div>
      </div>
    </div>

    <!-- User Action Modals -->
    <div id="banUserModal" class="modal" style="display: none;">
      <div class="modal-content">
        <span class="modal-close" onclick="closeBanModal()">&times;</span>
        <h2>ğŸš« FelhasznÃ¡lÃ³ BannolÃ¡sa</h2>
        <div class="form-group">
          <label>FelhasznÃ¡lÃ³: <strong id="banUsername"></strong></label>
        </div>
        <div class="form-group">
          <label for="banReason">Indok:</label>
          <input type="text" id="banReason" class="form-control" placeholder="pl. SzabÃ¡lyzat megsÃ©rtÃ©se" required>
        </div>
        <div class="form-group">
          <label for="banDuration">IdÅ‘tartam:</label>
          <select id="banDuration" class="form-control">
            <option value="">VÃ©gleges</option>
            <option value="60">1 Ã³ra</option>
            <option value="1440">1 nap</option>
            <option value="10080">1 hÃ©t</option>
            <option value="43200">30 nap</option>
          </select>
        </div>
        <button id="confirmBanBtn" class="btn btn-danger">BannolÃ¡s</button>
        <button onclick="closeBanModal()" class="btn btn-secondary">MÃ©gse</button>
      </div>
    </div>

    <div id="resetPasswordModal" class="modal" style="display: none;">
      <div class="modal-content">
        <span class="modal-close" onclick="closeResetPasswordModal()">&times;</span>
        <h2>ğŸ”‘ JelszÃ³ VisszaÃ¡llÃ­tÃ¡sa</h2>
        <div class="form-group">
          <label>FelhasznÃ¡lÃ³: <strong id="resetPasswordUsername"></strong></label>
        </div>
        <div class="form-group">
          <label for="newUserPassword">Ãšj jelszÃ³:</label>
          <input type="password" id="newUserPassword" class="form-control" placeholder="Ãšj jelszÃ³" required>
        </div>
        <button id="confirmResetPasswordBtn" class="btn btn-primary">JelszÃ³ VisszaÃ¡llÃ­tÃ¡sa</button>
        <button onclick="closeResetPasswordModal()" class="btn btn-secondary">MÃ©gse</button>
      </div>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="login-screen">
      <div class="login-card">
        <div class="spinner"
          style="margin: 20px auto; width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; animation: spin 1s linear infinite;">
        </div>
        <p>CsatlakozÃ¡s...</p>
      </div>
    </div>

    <!-- Lobby -->
    <div id="lobby" class="lobby" style="display: none;">
      <!-- Welcome Section -->
      <div class="welcome-section">
        <div class="welcome-text">
          <span class="welcome-greeting">ğŸ‘‹ ÃœdvÃ¶zÃ¶ljÃ¼k, </span>
          <span id="welcomePlayerName" class="welcome-name"></span>
        </div>

        <!-- Gombok Ãºj elrendezÃ©sben -->
        <div class="welcome-controls-wrapper">
          <!-- TÃ©ma gombok (kicsi ikonok) -->
          <div class="theme-buttons-group">
            <button id="themeToggleBtnLobby" class="theme-btn" title="SÃ¶tÃ©t/VilÃ¡gos mÃ³d">ğŸŒ“</button>
            <button id="themeSettingsBtnLobby" class="theme-btn" title="TÃ©ma beÃ¡llÃ­tÃ¡sok">ğŸ¨</button>
            <button id="rulesBtnLobby" class="theme-btn" title="JÃ¡tÃ©kszabÃ¡lyok"
              onclick="window.open('rules.html', '_blank')">ğŸ“–</button>
          </div>

          <!-- FÅ‘ gombok (Profil, Admin, Stats, Leaderboard, KilÃ©pÃ©s) -->
          <div class="main-buttons-group">
            <button id="viewProfileBtn" class="btn btn-profile">ğŸ‘¤ Profilom</button>
            <button id="adminLoginBtn" class="btn btn-admin">ğŸ”‘ Admin</button>
            <button id="viewStatsBtn" class="btn btn-stats">ğŸ“Š StatisztikÃ¡k</button>
            <button id="viewLeaderboardBtn" class="btn btn-success">ğŸ† Ranglista</button>
            <button id="logoutBtn" class="btn btn-danger">ğŸšª KilÃ©pÃ©s</button>
          </div>
        </div>
      </div>

      <div class="lobby-container">
        <!-- Online Players List -->
        <div class="card online-players-card">
          <h2>Online jÃ¡tÃ©kosok (<span id="lobbyOnlineCount">0</span>)</h2>
          <div id="lobbyOnlinePlayersList" class="lobby-online-list">
            <p class="no-players">Nincsenek online jÃ¡tÃ©kosok...</p>
          </div>
        </div>

        <div class="card">
          <h2>Ãšj szoba lÃ©trehozÃ¡sa</h2>
          <p class="hint">ğŸ² A szoba kÃ³dot automatikusan generÃ¡ljuk</p>
          <div class="form-group">
            <label for="boardSize">TÃ¡bla mÃ©ret:</label>
            <select id="boardSize" class="board-size-select">
              <option value="9">9x9 (Kicsi)</option>
              <option value="13">13x13 (KÃ¶zepes)</option>
              <option value="15" selected>15x15 (Standard)</option>
              <option value="19">19x19 (Nagy)</option>
            </select>
          </div>
          <div class="form-group">
            <label for="gameMode">JÃ¡tÃ©k mÃ³d:</label>
            <select id="gameMode" class="board-size-select">
              <option value="pvp">ğŸ‘¥ JÃ¡tÃ©kos vs JÃ¡tÃ©kos</option>
              <option value="ai-easy">ğŸ¤ª AI (Bugyuta)</option>
              <option value="ai-medium">ğŸ˜Š AI (KÃ¶zepes)</option>
              <option value="ai-hard">ğŸ˜ AI (NehÃ©z)</option>
              <option value="ai-very-hard">ğŸ”¥ AI (Nagyon NehÃ©z)</option>
              <option value="ai-extreme">ğŸ’€ AI (EXTRÃ‰M)</option>
              <option value="ai-vs-ai">ğŸ¤–âš”ï¸ğŸ¤– AI vs AI (BemutatÃ³)</option>
            </select>
          </div>
          <button id="createRoomBtn" class="btn btn-primary">Szoba lÃ©trehozÃ¡sa</button>
          <p class="hint">ğŸ’¡ AI mÃ³dban automatikusan kezdheted a jÃ¡tÃ©kot!</p>
        </div>

        <div class="card rooms-list-card">
          <h2>SzobÃ¡k</h2>
          <div id="roomsList" class="rooms-list">
            <p class="no-rooms">Jelenleg nincsenek szobÃ¡k...</p>
          </div>
        </div>

        <!-- Lobby Chat -->
        <div class="card lobby-chat-card">
          <h2>ğŸ’¬ Lobby Chat</h2>
          <div id="lobbyChatMessages" class="lobby-chat-messages"></div>
          <div class="lobby-chat-input-container">
            <input type="text" id="lobbyChatInput" class="chat-input" placeholder="Ãrj Ã¼zenetet a lobbyban..."
              maxlength="200">
            <button id="lobbyChatSendBtn" class="chat-send-btn">KÃ¼ldÃ©s</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Profile View -->
    <div id="profileView" class="stats-view" style="display: none;">
      <div class="stats-header">
        <h2>ğŸ‘¤ JÃ¡tÃ©kos Profil</h2>
        <button id="backToLobbyFromProfile" class="btn btn-primary">â¬…ï¸ Vissza a lobbyba</button>
      </div>
      <div class="stats-content">
        <!-- Profile Header -->
        <div class="profile-header-section" style="text-align: center; margin-bottom: 30px;">
          <div class="profile-avatar-large" style="font-size: 100px; margin-bottom: 20px;">ğŸ‘¤</div>
          <h1 id="profilePlayerName" style="margin: 0; font-size: 2.5em;">JÃ¡tÃ©kos</h1>
          <p class="profile-rank-large" style="font-size: 1.3em; color: #666; margin-top: 10px;">
            <span id="profileRank">Ãšjonc</span>
            <span class="profile-score-large" style="margin-left: 20px;">ğŸ† <span id="profileScore">0</span> pont</span>
          </p>
        </div>

        <!-- Overall Statistics -->
        <div class="stats-section-large" style="margin-bottom: 30px;">
          <h3 style="margin-bottom: 20px; font-size: 1.5em;">ğŸ“ˆ ÃltalÃ¡nos StatisztikÃ¡k</h3>
          <div class="stats-summary">
            <div class="stat-card">
              <div class="stat-value" id="statTotalGames">0</div>
              <div class="stat-label">Ã–sszes jÃ¡tÃ©k</div>
            </div>
            <div class="stat-card">
              <div class="stat-value stat-win" id="statWins">0</div>
              <div class="stat-label">GyÅ‘zelmek</div>
            </div>
            <div class="stat-card">
              <div class="stat-value stat-loss" id="statLosses">0</div>
              <div class="stat-label">VeresÃ©gek</div>
            </div>
            <div class="stat-card">
              <div class="stat-value stat-draw" id="statDraws">0</div>
              <div class="stat-label">DÃ¶ntetlenek</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="statWinRate">0%</div>
              <div class="stat-label">GyÅ‘zelmi arÃ¡ny</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="statAvgMoves">0</div>
              <div class="stat-label">Ãtlag lÃ©pÃ©s/jÃ¡tÃ©k</div>
            </div>
          </div>
        </div>

        <!-- PvP Statistics -->
        <div class="stats-section-large" style="margin-bottom: 30px;">
          <h3 style="margin-bottom: 20px; font-size: 1.5em;">âš”ï¸ PvP StatisztikÃ¡k</h3>
          <div class="stats-summary">
            <div class="stat-card">
              <div class="stat-value stat-win" id="statPvpWins">0</div>
              <div class="stat-label">PvP GyÅ‘zelmek</div>
            </div>
            <div class="stat-card">
              <div class="stat-value stat-loss" id="statPvpLosses">0</div>
              <div class="stat-label">PvP VeresÃ©gek</div>
            </div>
          </div>
        </div>

        <!-- AI Statistics -->
        <div class="stats-section-large" style="margin-bottom: 30px;">
          <h3 style="margin-bottom: 20px; font-size: 1.5em;">ğŸ¤– AI Elleni StatisztikÃ¡k</h3>
          <div class="stats-summary">
            <div class="stat-card">
              <div class="stat-value" id="statAiEasy">0</div>
              <div class="stat-label">ğŸŸ¢ Easy AI</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="statAiMedium">0</div>
              <div class="stat-label">ğŸŸ¡ Medium AI</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="statAiHard">0</div>
              <div class="stat-label">ğŸ”´ Hard AI</div>
            </div>
            <div class="stat-card">
              <div class="stat-value stat-loss" id="statAiLosses">0</div>
              <div class="stat-label">AI elleni veresÃ©gek</div>
            </div>
          </div>
        </div>

        <!-- Achievements -->
        <div class="stats-section-large" style="margin-bottom: 30px;">
          <h3 style="margin-bottom: 20px; font-size: 1.5em;">ğŸ† EredmÃ©nyek</h3>
          <div class="stats-summary">
            <div class="stat-card">
              <div class="stat-value" id="statLongestStreak">0</div>
              <div class="stat-label">Leghosszabb sorozat</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="statCurrentStreak">0</div>
              <div class="stat-label">Jelenlegi sorozat</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="statFastestWin">-</div>
              <div class="stat-label">Leggyorsabb gyÅ‘zelem</div>
            </div>
          </div>
        </div>

        <!-- Board Preferences -->
        <div class="stats-section-large">
          <h3 style="margin-bottom: 20px; font-size: 1.5em;">ğŸ“ TÃ¡blamÃ©ret PreferenciÃ¡k</h3>
          <div class="board-prefs-large" style="max-width: 600px; margin: 0 auto;">
            <div class="board-pref-item" style="display: flex; align-items: center; margin-bottom: 15px;">
              <span class="board-size-label" style="width: 80px; font-weight: bold;">9x9</span>
              <div class="board-pref-bar" style="flex: 1; height: 30px; background: #eee; border-radius: 5px; overflow: hidden; margin: 0 15px;">
                <div class="board-pref-fill" id="boardPref9" style="width: 0%; height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); transition: width 0.5s;"></div>
              </div>
              <span class="board-pref-count" id="boardPref9Count" style="width: 50px; text-align: right; font-weight: bold;">0</span>
            </div>
            <div class="board-pref-item" style="display: flex; align-items: center; margin-bottom: 15px;">
              <span class="board-size-label" style="width: 80px; font-weight: bold;">13x13</span>
              <div class="board-pref-bar" style="flex: 1; height: 30px; background: #eee; border-radius: 5px; overflow: hidden; margin: 0 15px;">
                <div class="board-pref-fill" id="boardPref13" style="width: 0%; height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); transition: width 0.5s;"></div>
              </div>
              <span class="board-pref-count" id="boardPref13Count" style="width: 50px; text-align: right; font-weight: bold;">0</span>
            </div>
            <div class="board-pref-item" style="display: flex; align-items: center; margin-bottom: 15px;">
              <span class="board-size-label" style="width: 80px; font-weight: bold;">15x15</span>
              <div class="board-pref-bar" style="flex: 1; height: 30px; background: #eee; border-radius: 5px; overflow: hidden; margin: 0 15px;">
                <div class="board-pref-fill" id="boardPref15" style="width: 0%; height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); transition: width 0.5s;"></div>
              </div>
              <span class="board-pref-count" id="boardPref15Count" style="width: 50px; text-align: right; font-weight: bold;">0</span>
            </div>
            <div class="board-pref-item" style="display: flex; align-items: center; margin-bottom: 15px;">
              <span class="board-size-label" style="width: 80px; font-weight: bold;">19x19</span>
              <div class="board-pref-bar" style="flex: 1; height: 30px; background: #eee; border-radius: 5px; overflow: hidden; margin: 0 15px;">
                <div class="board-pref-fill" id="boardPref19" style="width: 0%; height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); transition: width 0.5s;"></div>
              </div>
              <span class="board-pref-count" id="boardPref19Count" style="width: 50px; text-align: right; font-weight: bold;">0</span>
            </div>
          </div>
          <p class="last-played-large" style="text-align: center; margin-top: 30px; font-size: 1.1em; color: #666;">UtoljÃ¡ra jÃ¡tszott: <span id="statLastPlayed" style="font-weight: bold;">Soha</span></p>
        </div>
      </div>
    </div>

    <!-- Statistics View -->
    <div id="statsView" class="stats-view" style="display: none;">
      <div class="stats-header">
        <h2>ğŸ“Š JÃ¡tÃ©k StatisztikÃ¡k</h2>
        <button id="backToLobbyBtn" class="btn btn-primary">â¬…ï¸ Vissza a lobbyba</button>
      </div>
      <div class="stats-content">
        <div class="stats-summary">
          <div class="stat-card">
            <div class="stat-value" id="statsTotalGames">0</div>
            <div class="stat-label">Ã–sszes jÃ¡tÃ©k</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="statsActiveGames">0</div>
            <div class="stat-label">AktÃ­v jÃ¡tÃ©kok</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="statsCompletedGames">0</div>
            <div class="stat-label">Befejezett</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="statsAiWinRate">0%</div>
            <div class="stat-label">AI gyÅ‘zelmi arÃ¡ny</div>
          </div>
        </div>
        <div class="charts-grid">
          <div class="chart-container">
            <h4>â° Peak idÅ‘pontok (24h)</h4>
            <canvas id="statsPeakTimesChart"></canvas>
          </div>
          <div class="chart-container">
            <h4>ğŸ“ NÃ©pszerÅ± tÃ¡blamÃ©retek</h4>
            <canvas id="statsBoardSizesChart"></canvas>
          </div>
          <div class="chart-container">
            <h4>ğŸ® JÃ¡tÃ©k mÃ³dok</h4>
            <canvas id="statsGameModesChart"></canvas>
          </div>
          <div class="chart-container">
            <h4>ğŸ† EredmÃ©nyek</h4>
            <canvas id="statsResultsChart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- Leaderboard View - ULTRA PREMIUM -->
    <div id="leaderboardView" class="leaderboard-view" style="display: none;">
      <!-- Particle Background Canvas -->
      <canvas id="leaderboardParticles" class="leaderboard-particles"></canvas>

      <!-- Back Button (Fixed Top) -->
      <button id="backToLobbyFromLeaderboard" class="leaderboard-back-btn">
        <span>â¬…ï¸</span> Vissza a lobbyba
      </button>

      <!-- Hero Section with Animated Trophy -->
      <div class="leaderboard-hero">
        <div class="trophy-animation">
          <div class="trophy-glow"></div>
          <div class="trophy-icon">ğŸ†</div>
        </div>
        <h1 class="leaderboard-title">Ranglista</h1>
        <p class="leaderboard-subtitle">LÃ©gy a legjobb jÃ¡tÃ©kos!</p>
      </div>

      <!-- Stats Overview Cards -->
      <div class="leaderboard-stats">
        <div class="stat-card-premium">
          <div class="stat-icon">ğŸ‘¥</div>
          <div class="stat-value" id="totalPlayersCount">-</div>
          <div class="stat-label">JÃ¡tÃ©kosok</div>
        </div>
        <div class="stat-card-premium">
          <div class="stat-icon">ğŸ®</div>
          <div class="stat-value" id="totalGamesCount">-</div>
          <div class="stat-label">Ã–sszes JÃ¡tÃ©k</div>
        </div>
        <div class="stat-card-premium">
          <div class="stat-icon">ğŸ‘‘</div>
          <div class="stat-value" id="topPlayerName">-</div>
          <div class="stat-label">Top JÃ¡tÃ©kos</div>
        </div>
      </div>

      <!-- Category Tabs (Modern) -->
      <div class="leaderboard-categories-modern">
        <button class="category-tab active" data-category="score">
          <span class="tab-icon">ğŸ’°</span>
          <span class="tab-text">PontszÃ¡m</span>
        </button>
        <button class="category-tab" data-category="winRate">
          <span class="tab-icon">ğŸ“Š</span>
          <span class="tab-text">GyÅ‘zelmi arÃ¡ny</span>
        </button>
        <button class="category-tab" data-category="totalGames">
          <span class="tab-icon">ğŸ®</span>
          <span class="tab-text">LegtÃ¶bb jÃ¡tÃ©k</span>
        </button>
        <button class="category-tab" data-category="pvpWins">
          <span class="tab-icon">âš”ï¸</span>
          <span class="tab-text">PvP bajnokok</span>
        </button>
        <button class="category-tab" data-category="aiMaster">
          <span class="tab-icon">ğŸ¤–</span>
          <span class="tab-text">AI mesterek</span>
        </button>
        <button class="category-tab" data-category="winStreak">
          <span class="tab-icon">ğŸ”¥</span>
          <span class="tab-text">Legjobb sorozat</span>
        </button>
      </div>

      <!-- 3D Podium for Top 3 -->
      <div id="leaderboardPodium" class="leaderboard-podium" style="display: none;">
        <div class="podium-container">
          <!-- 2nd Place -->
          <div class="podium-place podium-second">
            <div class="podium-player" id="podium2ndPlayer">
              <div class="podium-medal">ğŸ¥ˆ</div>
              <div class="podium-avatar">2</div>
              <div class="podium-name">-</div>
              <div class="podium-value">-</div>
            </div>
            <div class="podium-stand podium-stand-2">2</div>
          </div>
          <!-- 1st Place -->
          <div class="podium-place podium-first">
            <div class="podium-player" id="podium1stPlayer">
              <div class="podium-medal">ğŸ¥‡</div>
              <div class="podium-avatar podium-avatar-crown">1</div>
              <div class="podium-crown">ğŸ‘‘</div>
              <div class="podium-name">-</div>
              <div class="podium-value">-</div>
            </div>
            <div class="podium-stand podium-stand-1">1</div>
          </div>
          <!-- 3rd Place -->
          <div class="podium-place podium-third">
            <div class="podium-player" id="podium3rdPlayer">
              <div class="podium-medal">ğŸ¥‰</div>
              <div class="podium-avatar">3</div>
              <div class="podium-name">-</div>
              <div class="podium-value">-</div>
            </div>
            <div class="podium-stand podium-stand-3">3</div>
          </div>
        </div>
      </div>

      <!-- Glass Morphism Leaderboard Table -->
      <div class="leaderboard-glass-container">
        <div class="leaderboard-table-header">
          <h3 id="leaderboardCategoryTitle">ğŸ’° Top PontszÃ¡m</h3>
        </div>
        <div class="leaderboard-table-wrapper">
          <table class="leaderboard-table-premium">
            <thead>
              <tr>
                <th class="rank-col">#</th>
                <th class="name-col">JÃ¡tÃ©kos</th>
                <th class="rank-badge-col">Rang</th>
                <th class="value-col" id="leaderboardValueHeader">PontszÃ¡m</th>
                <th class="games-col">JÃ¡tÃ©kok</th>
                <th class="wins-col">GyÅ‘zelmek</th>
              </tr>
            </thead>
            <tbody id="leaderboardTableBody">
              <tr>
                <td colspan="6" class="leaderboard-loading-premium">
                  <div class="loading-spinner"></div>
                  <span>BetÃ¶ltÃ©s...</span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div id="gameArea" class="game-area" style="display: none;">
      <div class="game-info">
        <div id="roomIdDisplay" class="room-id-display" style="display: none;"></div>
        <div class="game-controls">
          <button id="undoBtn" class="btn btn-secondary" onclick="undoMove()">â†¶ VisszavonÃ¡s</button>
          <button id="resetBtn" class="btn btn-secondary">Ãšj JÃ¡tÃ©k</button>
          <button id="soundToggle" class="btn btn-secondary" onclick="toggleSound()">ğŸ”Š Hang BE</button>
          <button id="leaveSpectatorBtn" class="btn btn-warning" style="display: none;">ğŸ‘ï¸ KilÃ©pÃ©s a nÃ©zÅ‘i
            mÃ³dbÃ³l</button>
          <button id="leaveBtn" class="btn btn-danger">KilÃ©pÃ©s</button>
        </div>
        <div class="game-info-header">
          <div class="game-theme-controls">
            <button id="themeToggleBtnGame" class="theme-btn" title="Dark/Light mode">ğŸŒ“</button>
            <button id="themeSettingsBtnGame" class="theme-btn" title="TÃ©mÃ¡k">ğŸ¨</button>
          </div>
          <div id="player1Info" class="player-info">
            <span class="player-symbol">X</span>
            <span class="player-name">VÃ¡rakozÃ¡s...</span>
          </div>
          <div id="player2Info" class="player-info">
            <span class="player-symbol">O</span>
            <span class="player-name">VÃ¡rakozÃ¡s...</span>
          </div>
        </div>
        <div id="timer" class="timer" style="display: none;">
          <span class="timer-icon">â±ï¸</span>
          <span id="timerDisplay" class="timer-display">--</span>
          <div class="timer-progress-bar">
            <div id="timerProgressFill" class="timer-progress-fill"></div>
          </div>
        </div>
        <div id="currentTurn" class="current-turn">VÃ¡rakozÃ¡s mÃ¡sik jÃ¡tÃ©kosra...</div>
        <div id="messages" class="messages"></div>
      </div>

      <div class="board-container">
        <canvas id="gameBoard"></canvas>
        <div id="reactionOverlay" class="reaction-overlay"></div>
      </div>

      <div class="emoji-bar">
        <button class="emoji-btn" onclick="sendReaction('ğŸ‘')">ğŸ‘</button>
        <button class="emoji-btn" onclick="sendReaction('ğŸ˜‚')">ğŸ˜‚</button>
        <button class="emoji-btn" onclick="sendReaction('ğŸ˜®')">ğŸ˜®</button>
        <button class="emoji-btn" onclick="sendReaction('ğŸ¤”')">ğŸ¤”</button>
        <button class="emoji-btn" onclick="sendReaction('ğŸ‘')">ğŸ‘</button>
        <button class="emoji-btn" onclick="sendReaction('ğŸ˜')">ğŸ˜</button>
      </div>

      <div class="chat-container">
        <div class="chat-header">
          <span class="chat-title">ğŸ’¬ Chat</span>
        </div>
        <div id="chatMessages" class="chat-messages"></div>
        <div class="chat-input-container">
          <input type="text" id="chatInput" class="chat-input" placeholder="Ãrj egy Ã¼zenetet..." maxlength="200">
          <button id="chatSendBtn" class="chat-send-btn">KÃ¼ldÃ©s</button>
        </div>
      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="game.js?v=2.12"></script>
</body>

</html>